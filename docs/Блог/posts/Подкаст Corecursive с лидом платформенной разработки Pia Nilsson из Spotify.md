---
share: true
date: 2023-11-03
categories:
  - devops
slug: spotify
---

Вышел новый выпуск подкаста **Corecursive** лидом платформенной разработки Pia Nilsson из Spotify. [Тут](https://corecursive.com/platform-takes-the-pain/) можно послушать или почитать transcript, если лень слушать. [Тут](https://www.reddit.com/r/programming/comments/17m0eli/platform_takes_the_pain_the_inside_story_of/) почитать комментарии на reddit. 

Я думал будет интересно, но как-то слишком много философии и мало технических деталей. Но раз уж я все послушал, вот мои заметки, чтобы вам не пришлось все читать: 
<!-- more -->

- Когда она пришла в 2016 в спотифай - там для CI/CD использовали 200 отдельных инстансов Jenkins. По принципу, что каждая команда разработки сама разворачивает и сопровождает свой личный дженкинс, сама пишет скрипты сборки и деплоя на прод. За 6 месяцев все это нужно было унифицировать, чтобы пройти аудит для выхода на IPO. 
  
- У команды платформы не было полномочий заставить всех перейти на платформу из-за общей культуры в Spotify, которая была нацелена на максимальную автономность и независимость команд. Пришлось менять подход к внедрению. Придумали слоган **«Platform Takes the Pain»**. Разработчики платформы стали ответственными за adoption платформы внутри организации. Начали сами ходит по командам и «продавать» платформу. 
  
- В Spotify была проблема с распространением знаний по системам. Как понять, кто отвечает за систему X? Как с ней интегрироваться? В компании назвали этот подход **Rumor Driven Development**. Когда тебе что-то нужно - спроси ближайшего к тебе коллегу, он может и не ответит, но скажет у кого можно дальше спросить. И так по цепочке ты дойдешь до нужного тебе человека. Это сильно влияло на производительность, людей постоянно отвлекали вопросами, никто не мог найти нужную информацию. 
  
- Чтобы это пофиксить они выкатили портал для разработчиков на базе своего <https://backstage.io/>. И начали мониторить метрику «сколько дней нужно новому разработчику, чтобы сделать 10ый пулл реквест». Изначально эта метрика была равна 60 дням. Целевой показатель 20 дней. 
  
- <https://backstage.io/> был разработан с возможностью расширения через плагины, чтобы разработчики отдельных команд могли сами добавлять функциональность в портал и платформенная команда не была больше узким горлышком. 
  
- По итогу за 6 месяцев они закопали 200 Jenkins серверов, переведя все сборки в контейнеры. Что позволило им удачно пройти аудит и запустить IPO. 
  
  
  В комментариях на реддите, кстати, обосрали сначала UI спотифая, потом их <https://backstage.io/,> потом подход с не обязательностью использования платформы.